<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Catálogo REDIVE</title>
  <style>

    body {
      margin:0;
      font-family:'Segoe UI','Roboto',sans-serif;
      background: linear-gradient(160deg,#1e003d,#350060,#200040);
      color:#e0cfff;
    }
    h1 {
      text-align:center;
      margin:25px 0;
      font-size:2.2rem;
      color:#bb86fc;
      letter-spacing:1px;
      text-shadow: 0 2px 8px rgba(0,0,0,0.6);
    }
    h1 span { color:#fff; }


    .loader-bar {
      height:4px; width:0;
      background:linear-gradient(90deg,#bb86fc,#7f39fb,#03dac6);
      animation:loading 2s infinite;
    }
    @keyframes loading { 0%{width:0;} 50%{width:80%;} 100%{width:0;} }

    /* ================== TABS ================== */
    .tabs { text-align:center; margin:20px 0; }
    .tabs button {
      padding:10px 22px; margin:5px;
      border:none; border-radius:30px;
      background:#2c1f44; color:#ccc;
      font-weight:bold; font-size:0.9rem;
      cursor:pointer; transition:all .3s;
      box-shadow: 0 2px 6px rgba(0,0,0,.4);
    }
    .tabs button.active {
      background: linear-gradient(45deg,#bb86fc,#7f39fb);
      color:#fff; font-size:1rem;
      box-shadow: 0 0 12px rgba(187,134,252,.7);
    }
    .tabs button:hover:not(.active) {
      background:#3b2a57;
    }

  
    .search { text-align:center; margin:15px; }
    .search input {
      width:90%; max-width:420px;
      padding:12px 15px;
      border:none; border-radius:25px;
      font-size:0.95rem;
      background:#2c1f44; color:#f0f0f0;
      outline:none;
    }
    .search input::placeholder { color:#aaa; }


    .grid {
      display:grid; gap:20px;
      grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
      padding:20px;
    }


    .card {
      background:#2a1744;
      border-radius:14px;
      overflow:hidden;
      box-shadow:0 4px 12px rgba(0,0,0,0.5);
      display:flex; flex-direction:column;
      transition:transform .25s ease, box-shadow .25s ease;
    }
    .card:hover { transform:translateY(-6px); box-shadow:0 8px 18px rgba(0,0,0,0.7); }
    .card img {
      width:100%; height:200px;
      object-fit:cover; cursor:pointer;
    }
    .card-body {
      padding:16px;
      display:flex; flex-direction:column;
      flex:1; justify-content:space-between;
    }
    .card-body h3 { margin:0; font-size:1.1rem; color:#fff; }
    .desc { font-size:0.9rem; color:#cbb5e9; margin:10px 0; flex:1; }
    .cond { font-size:0.8rem; color:#aaa; margin-bottom:5px; }
    .price { font-size:1rem; color:#bb86fc; font-weight:bold; margin:5px 0; }


    .btn {
      background: linear-gradient(45deg,#bb86fc,#7f39fb);
      color:white; text-align:center;
      padding:10px; border-radius:8px;
      text-decoration:none; font-size:0.9rem;
      font-weight:bold; transition:.3s;
      box-shadow:0 3px 10px rgba(0,0,0,.5);
    }
    .btn:hover {
      background: linear-gradient(45deg,#9b67d9,#5e2cb0);
      color:#fff; box-shadow:0 4px 14px rgba(0,0,0,.7);
    }

 
    .cta { text-align:center; margin:50px 20px; }
    .cta h2 {
      font-size:1.4rem;
      color:#e0cfff; font-weight:600;
      margin-bottom:15px;
    }
    .cta span.green { color:#03dac6; }
    .cta span.blue { color:#bb86fc; }
    .cta a {
      display:inline-block; margin:8px;
      padding:12px 25px;
      border-radius:30px;
      text-decoration:none; font-weight:bold;
      box-shadow:0 2px 10px rgba(0,0,0,.5);
    }
    .cta .wsp { background:#25d366; color:#fff; }
    .cta .wsp:hover { background:#1fa955; }
    .cta .mail { background:#2196f3; color:#fff; }
    .cta .mail:hover { background:#1976d2; }

 
    footer {
      text-align:center; padding:20px;
      background:#111; color:#aaa;
      font-size:0.85rem;
    }


    .modal { display:none; position:fixed; z-index:1000; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,.85); align-items:center; justify-content:center; }
    .modal img { max-width:90%; max-height:90%; border-radius:10px; box-shadow:0 4px 18px rgba(0,0,0,.9); }
    .modal:target { display:flex; }
  </style>
</head>
<body>

  <div id="loader" class="loader-bar"></div>
  <h1>TIENDA <span>REDIVE</span></h1>


  <div class="tabs">
    <button id="btnProductos" class="active" onclick="setTab('producto')">Productos</button>
    <button id="btnServicios" onclick="setTab('servicio')">Servicios</button>
  </div>


  <div class="search">
    <input type="text" id="searchInput" placeholder="Buscar...">
  </div>

  <div class="grid" id="grid"></div>


  <div class="cta">
    <h2>¿Querés publicar tus <span class="green">productos/servicios</span> o <span class="blue">tu propia tienda web?</span> Comunicate con nosotros.</h2>
    <a href="https://wa.me/5492646706973" target="_blank" class="wsp">WhatsApp</a>
    <a href="mailto:jquilpatay14@gmail.com" class="mail">Email</a>
  </div>


  <footer>
    © 2025 REDIVE – Soluciones Digitales.
  </footer>


  <div id="modal" class="modal" onclick="cerrarModal()">
    <img id="modalImg" src="">
  </div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbzGg7HN3t0_ZW6sQ9zqNT2ybSIScJRWJM0DoA5ae1mSnA_BV6EdMSPKKgihPICOWxE/exec";
let productos = [], servicios = [];
let activeTab = "producto";

async function cargarDatos() {
  document.getElementById("loader").style.display="block";
  const resProd = await fetch(`${API_URL}?action=productos`);
  productos = await resProd.json();
  const resServ = await fetch(`${API_URL}?action=servicios`);
  servicios = await resServ.json();
  renderGrid();
  document.getElementById("loader").style.display="none";
}

function setTab(tab) {
  activeTab = tab;
  document.getElementById("btnProductos").classList.remove("active");
  document.getElementById("btnServicios").classList.remove("active");
  document.getElementById(tab === "producto" ? "btnProductos" : "btnServicios").classList.add("active");
  renderGrid();
}

function renderGrid() {
  const grid = document.getElementById("grid");
  grid.innerHTML = "";
  const list = activeTab==="producto" ? productos : servicios;
  const q = document.getElementById("searchInput").value.toLowerCase();
  list.filter(i=> i.nombre.toLowerCase().includes(q) || i.desc.toLowerCase().includes(q))
      .forEach(i => {
    grid.innerHTML += `
      <div class="card">
        <img src="${i.img}" alt="${i.nombre}" onclick="ampliarImagen('${i.img}')">
        <div class="card-body">
          <h3>${i.nombre}</h3>
          <p class="desc">${i.desc}</p>
          <p class="cond">Condición: ${i.condicion}</p>
          <p class="price">$${i.precio}</p>
          <a href="https://wa.me/${i.whatsapp}?text=Hola,%20me%20interesa%20${encodeURIComponent(i.nombre)}" 
             class="btn" target="_blank" onclick="registrarClick('${i.id}','${activeTab}')">Consultar</a>
        </div>
      </div>`;
  });
}

function ampliarImagen(src) {
  document.getElementById("modalImg").src = src;
  document.getElementById("modal").style.display="flex";
}
function cerrarModal(){ document.getElementById("modal").style.display="none"; }

async function registrarClick(id, tipo) {
  await fetch(`${API_URL}?action=click&id=${id}&tipo=${tipo}`);
}

document.getElementById("searchInput").addEventListener("input", renderGrid);

cargarDatos();
</script>
</body>
</html>

